// Auto-generated seed derived from database/restaurant_inventory.menu.json (ids removed)
export const sections = [
  { "category": "Veg", "subcategory": "Starters", "items": [
    { "name": "Kaju Fry", "price": 200 },
    { "name": "Kaju Paneer", "price": 250 },
    { "name": "Paneer Manchuria", "price": 200 },
    { "name": "Chilli Paneer", "price": 220 },
    { "name": "Paneer 65", "price": 220 },
    { "name": "Pepper Paneer", "price": 220 },
    { "name": "Mushroom Manchuria", "price": 180 },
    { "name": "Mushroom 65", "price": 180 },
    { "name": "Chilli Mushroom", "price": 180 },
    { "name": "Babycorn Manchuria", "price": 160 },
    { "name": "Babycorn 65", "price": 160 },
    { "name": "Gobhi Manchuria", "price": 150 },
    { "name": "Gobhi 65", "price": 150 },
    { "name": "Chilli Gobhi", "price": 150 },
    { "name": "Green Pea Roast", "price": 100 },
    { "name": "Palli Masala", "price": 100 },
    { "name": "Palli Mix", "price": 100 }
  ]},
  { "category": "Non-Veg", "subcategory": "Starters", "items": [
    { "name": "Chicken Bone Fry", "price": 180 },
    { "name": "Chicken Boneless Fry", "price": 200 },
    { "name": "Chicken 65", "price": 200 },
    { "name": "Chicken Manchuria", "price": 200 },
    { "name": "Chilli Chicken", "price": 200 },
    { "name": "Ginger Chicken", "price": 220 },
    { "name": "Kaju Chicken", "price": 230 },
    { "name": "Chicken Lollipop (4p)", "price": 250 },
    { "name": "Chicken Wings (6p)", "price": 250 },
    { "name": "Pepper Chicken", "price": 230 },
    { "name": "Dragon Chicken", "price": 250 },
    { "name": "Chicken Majestic", "price": 250 },
    { "name": "Chicken Drumstick", "price": 250 },
    { "name": "Mutton Fry", "price": 300 },
    { "name": "Chilli Mutton", "price": 300 },
    { "name": "Mutton 65", "price": 300 },
    { "name": "Pepper Mutton", "price": 300 },
    { "name": "Kamju Pitta Fry", "price": 300 },
    { "name": "Kamju Pitta Roast", "price": 300 },
    { "name": "Fish Fry (2p)", "price": 100 },
    { "name": "Chilli Fish", "price": 280 },
    { "name": "Fish 65", "price": 280 },
    { "name": "Prawn Fry", "price": 280 },
    { "name": "Prawn Manchuria", "price": 280 },
    { "name": "Chilli Prawn", "price": 300 },
    { "name": "Prawn 65", "price": 300 },
    { "name": "Egg Fry (3p)", "price": 80 },
    { "name": "Half Boiled Egg (3p)", "price": 50 },
    { "name": "Omelet (2p)", "price": 50 },
    { "name": "Boiled Egg (3p)", "price": 50 }
  ]},
  { "category": "Veg", "subcategory": "Curries", "items": [
    { "name": "Kaju Tomato", "price": 220 },
    { "name": "Kaju Curry", "price": 250 },
    { "name": "Kaju Paneer", "price": 250 },
    { "name": "Paneer Butter Masala", "price": 220 },
    { "name": "Paneer Curry", "price": 200 },
    { "name": "Palak Paneer", "price": 220 },
    { "name": "Methi Chaman", "price": 180 },
    { "name": "Mushroom Curry", "price": 180 },
    { "name": "Kaju Mushroom Curry", "price": 230 },
    { "name": "Veg Curry", "price": 160 },
    { "name": "Kadai Veg Curry", "price": 160 },
    { "name": "Green Pea Curry", "price": 150 },
    { "name": "Dharani's Spl Curry", "price": 220 }
  ]},
  { "category": "Non-Veg", "subcategory": "Curries", "items": [
    { "name": "Chicken Masala", "price": 200 },
    { "name": "Kadai Chicken", "price": 230 },
    { "name": "Telangana Chicken", "price": 250 },
    { "name": "Andhra Chicken", "price": 230 },
    { "name": "Chicken Kolapuri", "price": 230 },
    { "name": "Chicken Mughalai", "price": 250 },
    { "name": "Chicken Afghani", "price": 250 },
    { "name": "Butter Chicken Masala", "price": 250 },
    { "name": "Dharani Spl Chicken Curry", "price": 250 },
    { "name": "Mutton Masala", "price": 300 },
    { "name": "Mutton Rogan Josh", "price": 300 },
    { "name": "Mutton Kadai", "price": 300 },
    { "name": "Mutton Chikkudu", "price": 300 },
    { "name": "Andhra Mutton", "price": 300 },
    { "name": "Telangana Mutton", "price": 300 },
    { "name": "Fish Masala", "price": 280 },
    { "name": "Prawn Masala", "price": 280 },
    { "name": "Prawn Curry", "price": 280 }
  ]},
  { "category": "Veg", "subcategory": "Biryani", "items": [
    { "name": "Mix Veg Biryani", "price": 150 },
    { "name": "Mushroom Biryani", "price": 180 },
    { "name": "Paneer Biryani", "price": 200 },
    { "name": "Kaju Paneer Biryani", "price": 230 },
    { "name": "Egg Biryani", "price": 180 },
    { "name": "Boiled Egg Biryani", "price": 150 },
    { "name": "Biryani Rice", "price": 100 }
  ]},
  { "category": "Non-Veg", "subcategory": "Biryani", "items": [
    { "name": "Chicken Dum Biryani (Mini)", "price": 140 },
    { "name": "Chicken Dum Biryani (Full)", "price": 240 },
    { "name": "Chicken Fry Biryani", "price": 250 },
    { "name": "Chicken 65 Biryani", "price": 250 },
    { "name": "Special Chicken Biryani", "price": 260 },
    { "name": "Chicken Lollipop Biryani", "price": 200 },
    { "name": "Mutton Biryani", "price": 320 },
    { "name": "Mutton Fry Biryani", "price": 300 },
    { "name": "Prawn Biryani", "price": 320 },
    { "name": "Prawn Fry Biryani", "price": 300 },
    { "name": "Fish Biryani", "price": 300 },
    { "name": "Fish Fry Biryani", "price": 280 },
    { "name": "Kamju Pitta Fry Biryani", "price": 300 },
    { "name": "Kamju Pitta Biryani", "price": 300 }
  ]},
  { "category": "Veg", "subcategory": "Family Pack Biryanis", "items": [
    { "name": "Veg Biryani", "price": 420 },
    { "name": "Paneer Biryani", "price": 600 },
    { "name": "Kaju Paneer Biryani", "price": 650 },
    { "name": "Mushroom Biryani", "price": 600 }
  ]},
  { "category": "Non-Veg", "subcategory": "Family Pack Biryanis", "items": [
    { "name": "Chicken Dum Biryani", "price": 600 },
    { "name": "Chicken Fry Biryani", "price": 650 },
    { "name": "Mutton Biryani", "price": 800 },
    { "name": "Mutton Fry Biryani", "price": 750 },
    { "name": "Fish Biryani (Boneless)", "price": 750 },
    { "name": "Prawn Biryani", "price": 800 }
  ]},
  { "category": "Rotis", "items": [
    { "name": "Pulka", "price": 10 },
    { "name": "Chapathi", "price": 15 },
    { "name": "Rumali Roti", "price": 20 },
    { "name": "Butter Rumali Roti", "price": 25 },
    { "name": "Butter Naan", "price": 30 },
    { "name": "Jonna Roti", "price": 25 }
  ]},
  { "category": "Meals", "subcategory": "Veg", "items": [
    { "name": "Veg Full Meals", "price": 120 },
    { "name": "Curd Rice", "price": 100 },
    { "name": "White Rice", "price": 50 }
  ]},
  { "category": "Non-Veg", "subcategory": "Meals", "items": [
    { "name": "White Rice - Chicken Curry", "price": 150 },
    { "name": "White Rice - Fish Pulusu", "price": 160 },
    { "name": "White Rice - Liver Fry", "price": 170 }
  ]},
  { "category": "Dharani's Specials", "items": [
    { "name": "Natukodi Pulusu", "price": 280 },
    { "name": "Natukodi Pulusu + White Rice", "price": 320 },
    { "name": "Natukodi Pulusu + Biryani Rice", "price": 350 },
    { "name": "Chepala Pulusu", "price": 260 },
    { "name": "Chepala Pulusu + White Rice", "price": 320 },
    { "name": "Raagi Mudda", "price": 80 }
  ]},
  { "category": "Beverages", "items": [
    { "name": "Coke", "price": 50 },
    { "name": "Thums Up", "price": 50 },
    { "name": "Sprite", "price": 50 },
    { "name": "Mirinda", "price": 50 },
    { "name": "Pulple Orange", "price": 50 }
  ]},
  { "category": "Ice Creams", "items": [
    { "name": "Vanilla", "price": 70 },
    { "name": "Chocolate", "price": 80 },
    { "name": "Pista", "price": 90 },
    { "name": "Sitaphal", "price": 90 },
    { "name": "Mixed Fruit", "price": 90 },
    { "name": "Black Current", "price": 100 },
    { "name": "Black Forest", "price": 100 }
  ]}
];

const normalize = (label) => (label || '').toLowerCase().replace(/[^a-z0-9]+/g, '-');

export function buildMenuFromSections() {
  let idCounter = 1;
  const now = new Date().toISOString().split('T')[0];

  const menuItems = [];
  const categoryTotals = new Map();

  sections.forEach(section => {
    const main = section.category;
    const sub = section.subcategory || section.category;
    const categoryKey = normalize(sub);

    (section.items || []).forEach(item => {
      const price = Number(item.price) || 0;
      const record = {
        id: idCounter++,
        name: item.name,
        price,
        category: normalize(main),
        subcategory: categoryKey,
        available: true,
        preparationTime: 0,
        popularity: 4.6,
        totalOrders: 0,
        revenue: 0,
        createdAt: now,
        updatedAt: now
      };
      menuItems.push(record);

      const agg = categoryTotals.get(categoryKey) || { itemCount: 0, revenue: 0 };
      agg.itemCount += 1;
      agg.revenue += 0;
      categoryTotals.set(categoryKey, agg);
    });
  });

  const categories = Array.from(categoryTotals.entries()).map(([id, stats]) => ({
    id,
    name: id.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase()),
    itemCount: stats.itemCount,
    revenue: stats.revenue
  }));

  const menuStats = {
    totalItems: menuItems.length,
    availableItems: menuItems.filter(i => i.available).length,
    unavailableItems: menuItems.filter(i => !i.available).length,
    totalRevenue: 0,
    averagePrice: menuItems.reduce((s, i) => s + i.price, 0) / Math.max(menuItems.length, 1),
    mostPopular: menuItems[0]?.name || '',
    topCategory: categories.sort((a,b)=>b.itemCount-a.itemCount)[0]?.name || '',
    totalOrders: menuItems.reduce((s,i)=>s + (i.totalOrders||0), 0),
    averageRating: 4.6
  };

  return { menuItems, categories, menuStats };
}
